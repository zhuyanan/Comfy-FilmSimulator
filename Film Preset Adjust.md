 **`films.json` 参数调试指南**。

---

### 📂 第一部分：影调控制 (Hable Curve)
**位置**：`"curve": { ... }`
**核心作用**：控制从黑到白的亮度响应、对比度和动态范围。

| 参数 | 全称 | 推荐范围 | 调整方向 (↑ 增大 / ↓ 减小) | 视觉效果描述 |
| :--- | :--- | :--- | :--- | :--- |
| **A** | **Shoulder Strength**<br>(高光滚降) | **0.15 ~ 0.45** | **↑ 增大** | **高光变柔**。强光处细节保留更多，不再是死白，类似胶片过曝后的奶油感。 |
| | | | **↓ 减小** | **高光变硬**。接近数码相机直出的硬截断，阳光感更刺眼。 |
| **B** | **Linear Strength**<br>(整体/中间调亮度) | **0.25 ~ 0.70** | **↑ 增大** | **画面变亮/通透**。中间调被提亮，适合日系、小清新、空气感风格。 |
| | | | **↓ 减小** | **画面变暗/浓郁**。中间调下沉，色彩显得更厚重，适合复古、情绪片。 |
| **C** | **Linear Angle**<br>(中间调硬度) | **0.05 ~ 0.50** | **↑ 增大** | **对比变硬/数码味**。中间调过渡迅速，画面很“脆”，有冲击力。 |
| | | | **↓ 减小** | **对比变软/胶片味**。中间调过渡平缓（Log感），灰阶丰富。 |
| **D** | **Toe Strength**<br>(暗部范围/软度) | **0.10 ~ 0.50** | **↑ 增大** | **暗部变灰/范围大**。更多的深灰色区域被识别为暗部，阴影看起来很软。 |
| | | | **↓ 减小** | **暗部变黑/范围小**。阴影迅速进入纯黑，画面反差大。 |
| **E** | **Toe Numerator**<br>(极暗部细节) | **0.01 ~ 0.10** | **↑ 增大** | **提亮死黑**。把原本黑死的地方强行提起来，能看到阴影里的噪点。 |
| | | | **↓ 减小** | **扎实黑位**。保持纯净的黑色。 |
| **F** | **Toe Denominator**<br>(暗部压缩/黑位) | **0.15 ~ 0.60** | **↑ 增大** | **压死暗部 (Crush)**。阴影被强力压缩成黑色，增加厚重感。 |
| | | | **↓ 减小** | **暗部平淡**。阴影缺乏深度。 |
| **Gamma** | **Gamma Correction**<br>(全局反差) | **1.8 ~ 2.6** | **↑ 增大** | **画面变深沉**。中间调往暗部压，高光显得更突出，色彩饱和度略增。 |
| | | | **↓ 减小** | **画面变灰亮**。暗部被提亮，整体对比度降低，适合褪色风格。 |
| **Exposure**| **Exposure Bias**<br>(曝光补偿) | **-1.0 ~ +1.0** | **↑ 增大** | **整体提亮**。模拟相机加曝光。 |
| | | | **↓ 减小** | **整体压暗**。模拟相机减曝光。 |

---

### 🎨 第二部分：色彩风格 (Color & Tint)
**位置**：`"tint": { ... }` 和 `"opt_r/g/b"`
**核心作用**：控制画面的冷暖倾向、色偏（Color Cast）和分离调色（Split Toning）。

| 参数 | 子参数 | 推荐范围 | 调整方向 / 效果 |
| :--- | :--- | :--- | :--- |
| **Tint** | **Shadows**<br>`[R, G, B]` | **0.0 ~ 0.1** | **输入正数**：**提升黑点并染色**（Fade Look）。<br>例如 `[0, 0, 0.05]` = 阴影不黑，而是深蓝色。<br>例如 `[0.05, 0.05, 0.05]` = 仿 Instagram 灰色胶片。 |
| **Tint** | **Highlights**<br>`[R, G, B]` | **-0.1 ~ 0.0** | **输入负数**：**压暗白点并染色**（Matte White）。<br>例如 `[-0.05, -0.05, -0.05]` = 白色不刺眼，呈浅灰。<br>例如 `[0, 0, -0.1]` = 高光缺蓝，呈现暖黄色（奶油调）。 |
| **Tint** | **Range**<br>(Power) | **1.0 ~ 4.0** | **↑ 增大 (3.0+)**：色偏只影响极黑/极白，肤色（中灰）很干净。<br>**↓ 减小 (1.0)**：色偏污染全图，像盖了一层滤镜。 |
| **Opt** | **opt_r / g / b**<br>`[Gain, _, _]` | **0.9 ~ 1.3** | **控制白平衡**。<br>增大 `opt_r[0]` = 画面变暖（红）。<br>增大 `opt_b[0]` = 画面变冷（蓝）。 |

---

### 🎞️ 第三部分：物理质感 (Texture & Physics)
**位置**：`"grain_base"`, `"sens_factor"`
**核心作用**：模拟胶片的颗粒感和光化学反应（光晕）。

| 参数 | 含义 | 推荐范围 | 调整方向 (↑ 增大 / ↓ 减小) | 视觉效果 |
| :--- | :--- | :--- | :--- | :--- |
| **sens_factor** | **Sensitivity**<br>(感光度因子) | **0.8 ~ 1.4** | **↑ 增大** | **光晕(Halation)更强**。模拟高感光胶片，亮部会有明显的扩散光辉。<br>**颗粒感更强**。 |
| **grain_base** | **Grain Strength**<br>(基础颗粒) | **0.05 ~ 0.25** | **↑ 增大** | **噪点变多/变粗**。模拟 ISO 800-3200 的粗糙质感。 |
| | | | **↓ 减小** | **画面纯净**。模拟 ISO 50-100 的细腻质感。 |

---

### 🎨 第四部分：色彩校准矩阵 (Matrix)
**位置**：`"matrix": [ ... ]` (共 12 个数字)
**核心作用**：定义 RGB 通道的混合方式。它决定了红色有多红，绿色里是否混了蓝色，或者黑白胶片对哪种颜色最敏感。

#### 1. 彩色胶片 (Color Film)
**生效范围**：数组的前 9 个数字 (索引 0-8)。
**结构**：`[ Rr, Rg, Rb,  Gr, Gg, Gb,  Br, Bg, Bb, ... ]`

| 索引位置 | 参数含义 | 调整技巧 | 视觉效果 |
| :--- | :--- | :--- | :--- |
| **0, 4, 8** | **主对角线**<br>(自身纯度) | **数值 > 1.0**：增加饱和度。<br>**数值 < 1.0**：降低饱和度。 | **控制色彩鲜艳度**。<br>例如 `m[0]` 是红色通道里的红色分量。如果设为 `1.2`，红色会非常鲜艳；设为 `0.8`，红色会变灰。 |
| **1, 2** | **红色通道混入杂色** | **增加数值** | **改变红色的色相**。<br>增加 `m[1]` (Rg)：让红色偏橙/黄。<br>增加 `m[2]` (Rb)：让红色偏洋红。 |
| **3, 5** | **绿色通道混入杂色** | **增加数值** | **改变绿色的色相**。<br>增加 `m[3]` (Gr)：让绿色偏黄（像柯达）。<br>增加 `m[5]` (Gb)：让绿色偏青（像富士）。 |
| **6, 7** | **蓝色通道混入杂色** | **增加数值** | **改变蓝色的色相**。<br>增加 `m[6]` (Br)：让蓝色偏紫。<br>增加 `m[7]` (Bg)：让蓝色偏青/天蓝。 |

> **⚖️ 守恒定律建议**：通常建议一行里的 3 个数字之和接近 **1.0**。
> *   如果你把红色的纯度 `m[0]` 提高到 `1.2`，最好把杂色 `m[1], m[2]` 稍微降低（甚至设为负数），否则画面会整体过曝或溢色。

---

#### 2. 黑白胶片 (B&W Film)
**生效范围**：数组的后 3 个数字 (索引 9-11)。
**结构**：`[ ..., Wr, Wg, Wb ]` (Weight Red, Weight Green, Weight Blue)
**核心作用**：模拟**滤镜效果**（红镜、黄镜、蓝镜）。

| 索引位置 | 参数含义 | 调整技巧 | 视觉效果 |
| :--- | :--- | :--- | :--- |
| **9** | **红色权重** | **调大 (如 0.6)** | **红镜效果**。压暗蓝天（蓝天变黑），提亮肤色和红唇。对比度极高，适合风光。 |
| **10** | **绿色权重** | **调大 (如 0.6)** | **绿镜效果**。提亮树叶/草地，压暗红唇（嘴唇变黑）。适合丛林人像。 |
| **11** | **蓝色权重** | **调大 (如 0.6)** | **蓝镜效果**。提亮天空（天空变白），强化雾气，压暗肤色（皮肤变黑/粗糙）。适合早期无声电影风格。 |

> **⚖️ 守恒定律**：这 3 个数字之和必须等于 **1.0**（或接近），否则黑白画面的整体亮度会不正常。

---

### 实战调整案例

#### 案例 A：模拟“富士绿” (Fuji Greens)
富士胶片的绿色通常偏青、偏冷，而且很纯。
```json
"matrix": [
  // 红通道：标准
  0.86, 0.09, 0.05, 
  // 绿通道：关键改动！减少红色混入(0.02)，增加蓝色混入(0.06)，绿色偏青
  0.02, 0.92, 0.06, 
  // 蓝通道：标准
  0.05, 0.05, 0.90, 
  0, 0, 0
]
```

#### 案例 B：模拟“柯达暖调” (Kodak Warmth)
柯达胶片的绿色通常偏黄，红色很扎实。
```json
"matrix": [
  // 红通道：稍微加点绿(0.12)，让红色偏橘
  0.82, 0.12, 0.06, 
  // 绿通道：关键改动！大量混入红色(0.10)，绿色偏黄/暖
  0.10, 0.85, 0.05, 
  // 蓝通道：稍微减淡
  0.05, 0.05, 0.90, 
  0, 0, 0
]
```

#### 案例 C：安塞尔·亚当斯风格黑白 (红镜风光)
压暗天空，突出云层层次。
```json
"matrix": [
  0,0,0, 0,0,0, 0,0,0, // 前面9个没用
  // 红色权重极大，蓝色权重极小
  0.60, 0.30, 0.10 
]
```

#### 案例 D：旧时代正色片 (Orthochromatic B&W)
早期胶片对红光不敏感，红色物体拍出来是黑的。
```json
"matrix": [
  0,0,0, 0,0,0, 0,0,0,
  // 红色权重为0，只感应蓝绿光
  0.00, 0.40, 0.60 
]
```

---

### 🚀 速查：我想实现某种风格，该动谁？

| 目标风格 | 关键参数调整 (Quick Recipe) |
| :--- | :--- |
| **日系空气感 (Airy)** | **B ↑** (0.60), **Exposure ↑**, **Gamma ↓** (1.9), **Opt_B ↑** (偏蓝) |
| **电影叙事感 (Cinematic)** | **B ↓** (0.35), **C ↓** (0.08), **Tint Range ↑** (3.0), **Tint Shadows** (加青蓝) |
| **褪色/拍立得 (Faded/Polaroid)** | **Tint Shadows** (`[0.05,0.05,0.05]`), **Gamma ↓**, **D ↑** |
| **高反差黑白 (High Con BW)** | **E ↓** (0.01), **F ↑** (0.50), **Gamma ↑** (2.4), **C ↑** (0.25) |
| **柔和人像 (Soft Portrait)** | **A ↑** (0.40), **C ↓** (0.05), **D ↑** (0.30), **Sens_factor ↑** (加光晕) |
| **赛博朋克/强力 (Punchy)** | **C ↑** (0.40), **B ↑** (0.55), **F ↑** (0.40), **Tint Highlights** (加色) |
